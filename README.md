arn:aws:sns:eu-west-1:556196322339:tests

# terraform-aws-budgets

This Terraform module provisions an AWS Budget.
AWS Budgets gives you the ability to set custom budgets that alert you when your costs or usage exceed (or are forecasted to exceed) your budgeted amount. This helps you avoid unexpected and expensive surprises in your AWS bills.

## Installation

To use this module, you need to have Terraform installed. You can find installation instructions on the Terraform website.

## Usage

The module will create an AWS Budget.
Use this module multiple times to create budgets with different configurations.

Include this repository as a module in your existing terraform code:

```hcl
################################################################################
# AWS Budget
################################################################################

provider "aws" {
  region = "eu-west-1"
}

resource "aws_sns_topic" "sns_topic" {
  name         = "sns"
  display_name = "sns"
}

module "example" {
  source       = "delivops/budgets/aws"
  #version      = "0.0.4"

  budget_name  = "123"
  budget_type  = "COST"
  limit_amount = 500
  cost_filters = [
    {
      name  = "Service"
      value = ["Amazon Simple Storage Service", "Amazon Elastic Compute Cloud - Compute", "AWS Lambda"]
    }
  ]
  email_addresses = ["osnat529@gmail.com", "yehu@gmail.com"]
  sns_topic_arn   = aws_sns_topic.sns_topic.arn
  depends_on        = [aws_sns_topic.sns_topic]
}
```

<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version  |
| ------------------------------------------------------------------------ | -------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 1.3.0 |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | >= 4.0   |

## Providers

| Name                                             | Version |
| ------------------------------------------------ | ------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | >= 4.0  |

## Modules

No modules.

## Resources

| Name                                                                                                                  | Type     |
| --------------------------------------------------------------------------------------------------------------------- | -------- |
| [aws_budgets_budget.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/budgets_budget) | resource |

## Inputs

| Name                                                                                             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Type                                                                                                                                                                                                               | Default     | Required |
| ------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------- | :------: |
| <a name="input_budget_name"></a> [budget_name](#input_budget_name)                               | The name of the budget. Unique within accounts.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                           | n/a         |   yes    |
| <a name="input_budget_type"></a> [budget_type](#input_budget_type)                               | Whether this budget tracks monetary cost or usage. Availiable options: 'COST', 'USAGE', 'SAVINGS_PLANS_UTILIZATION', 'RI_UTILIZATION'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `string`                                                                                                                                                                                                           | `"COST"`    |    no    |
| <a name="input_cost_filters"></a> [cost_filters](#input_cost_filters)                            | A list of CostFilter name/values pair to apply to budget.<br/> Example:<pre>terraform<br/> [<br/> {<br/> name = "AZ"<br/> value = ["eu-central-1b"]<br/> },<br/> ]</pre>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | <pre>list(object({<br/> name = string<br/> value = list(string)<br/> }))</pre>                                                                                                                                     | `[]`        |    no    |
| <a name="input_cost_types"></a> [cost_types](#input_cost_types)                                  | Map containing CostTypes The types of cost included in a budget, such as tax and subscriptions.<br/> Valid keys:<br/> include_credit - A boolean value whether to include credits in the cost budget. Defaults to true<br/> include_discount - Specifies whether a budget includes discounts. Defaults to true<br/> include_other_subscription - A boolean value whether to include other subscription costs in the cost budget. Defaults to true<br/> include_recurring - A boolean value whether to include recurring costs in the cost budget. Defaults to true<br/> include_refund - A boolean value whether to include refunds in the cost budget. Defaults to true<br/> include_subscription - A boolean value whether to include subscriptions in the cost budget. Defaults to true<br/> include_support - A boolean value whether to include support costs in the cost budget. Defaults to true<br/> include_tax - A boolean value whether to include tax in the cost budget. Defaults to true<br/> include_upfront - A boolean value whether to include upfront costs in the cost budget. Defaults to true<br/> use_amortized - Specifies whether a budget uses the amortized rate. Defaults to false<br/> use_blended - A boolean value whether to use blended costs in the cost budget. Defaults to false | `map(string)`                                                                                                                                                                                                      | `{}`        |    no    |
| <a name="input_extra_email_addresses"></a> [extra_email_addresses](#input_extra_email_addresses) | A list of additional e-mail addresses that will receive all notifications                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `list(string)`                                                                                                                                                                                                     | `[]`        |    no    |
| <a name="input_limit_amount"></a> [limit_amount](#input_limit_amount)                            | The amount of cost or usage being measured for a budget                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `number`                                                                                                                                                                                                           | n/a         |   yes    |
| <a name="input_limit_unit"></a> [limit_unit](#input_limit_unit)                                  | The unit of measurement used for the budget forecast, actual spend, or budget threshold.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                           | `"USD"`     |    no    |
| <a name="input_notifications"></a> [notifications](#input_notifications)                         | A map of objects containing Budget Notifications. Required object fields:<br/> comparison_operator - Comparison operator to use to evaluate the condition. Can be LESS_THAN, EQUAL_TO or GREATER_THAN.<br/> threshold - Threshold when the notification should be sent.<br/> threshold_type - What kind of threshold is defined. Can be PERCENTAGE OR ABSOLUTE_VALUE.<br/> notification_type - What kind of budget value to notify on. Can be ACTUAL or FORECASTED.<br/> subscriber_email_addresses - E-Mail addresses to notify.<br/> Example:<pre>terraform <br/> test = {<br/> comparison_operator = "GREATER_THAN"<br/> notification_type = "ACTUAL"<br/> subscriber_email_addresses = ["notifications@example.com"]<br/> threshold = 80<br/> threshold_type = "PERCENTAGE"<br/> }</pre>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | <pre>map(object(<br/> {<br/> comparison_operator = string<br/> threshold = number<br/> threshold_type = string<br/> notification_type = string<br/> subscriber_email_addresses = list(string)<br/> }<br/> ))</pre> | n/a         |   yes    |
| <a name="input_time_period_end"></a> [time_period_end](#input_time_period_end)                   | The end of the time period covered by the budget. There are no restrictions on the end date. Format: 2017-01-01_12:00                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                           | `null`      |    no    |
| <a name="input_time_period_start"></a> [time_period_start](#input_time_period_start)             | The start of the time period covered by the budget. If you don't specify a start date, AWS defaults to the start of your chosen time period. The start date must come before the end date. Format: 2017-01-01_12:00                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                           | `null`      |    no    |
| <a name="input_time_unit"></a> [time_unit](#input_time_unit)                                     | The length of time until a budget resets the actual and forecasted spend. Valid values: MONTHLY, QUARTERLY, ANNUALLY, and DAILY.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                           | `"MONTHLY"` |    no    |

## Outputs

| Name                                                                                   | Description                                                               |
| -------------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| <a name="output_arn"></a> [arn](#output_arn)                                           | ARN of the budget                                                         |
| <a name="output_budget_type"></a> [budget_type](#output_budget_type)                   | Type of the budget                                                        |
| <a name="output_cost_filter"></a> [cost_filter](#output_cost_filter)                   | A list of CostFilter name/values pair to apply to budget.                 |
| <a name="output_id"></a> [id](#output_id)                                              | ID of the budget                                                          |
| <a name="output_limit_amount"></a> [limit_amount](#output_limit_amount)                | The amount of cost or usage being measured for a budget.                  |
| <a name="output_name"></a> [name](#output_name)                                        | The name of a budget. Unique within accounts.                             |
| <a name="output_notification"></a> [notification](#output_notification)                | Object containing Budget Notifications.                                   |
| <a name="output_time_period_end"></a> [time_period_end](#output_time_period_end)       | The end of the time period covered by the budget                          |
| <a name="output_time_period_start"></a> [time_period_start](#output_time_period_start) | The start of the time period covered by the budget                        |
| <a name="output_time_unit"></a> [time_unit](#output_time_unit)                         | The length of time until a budget resets the actual and forecasted spend. |

<!-- END_TF_DOCS -->

## information

1. Time to create a cost-anomaly-detector is around 2 minutes.

## License

MIT
